<!DOCTYPE html>
<html>
	<head>
		<title>Wartelpas - Dashboard</title>
		<meta charset="utf-8">
		<meta http-equiv="cache-control" content="private" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="theme-color" content="#1a2226" />
		<!-- Menggunakan CDN untuk Font Awesome dan jQuery bagi memastikan ia dimuatkan dengan betul -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
		<link rel="stylesheet" href="css/mikhmon-ui.dark.min.css">
		<link rel="icon" href="./img/favicon.png" />
		<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
		<link href="css/pace.dark.css" rel="stylesheet" />
		<link href="css/login.css" rel="stylesheet" />
		<script src="js/pace.min.js"></script>

<style>
    :root {
        --nav-bg: #1a2226;
        --nav-hover: #222d32;
        --nav-text: #9db2ba;
        --nav-active: #ffffff;
        --accent: #3c8dbc;
        --accent-audit: #d81b60;
        --header-shadow: 0 2px 10px rgba(0,0,0,0.4);
    }

    body { margin-top: 60px; background-color: #222d32; }

    .top-navbar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        background-color: var(--nav-bg);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        box-shadow: var(--header-shadow);
        z-index: 1030;
        font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        border-bottom: 1px solid rgba(255,255,255,0.05);
    }

    .wartelpas-brand {
        display: flex;
        align-items: center;
        text-decoration: none;
        margin-right: 30px;
        height: 100%;
    }

    .brand-logo {
        height: 45px;
        width: auto;
        object-fit: contain;
    }

    .nav-links {
        display: flex;
        gap: 0;
        flex-grow: 1;
        align-items: center;
        list-style: none;
        margin: 0;
        padding: 0;
        height: 100%;
    }

    .nav-item { position: relative; height: 100%; }

    .nav-link {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--nav-text);
        text-decoration: none;
        padding: 0 15px;
        height: 100%;
        font-size: 13.5px;
        font-weight: 600;
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        border-bottom: 3px solid transparent;
        white-space: nowrap;
    }

    .nav-link:hover {
        background-color: var(--nav-hover);
        color: var(--nav-active);
    }

    .nav-link.active {
        color: var(--nav-active);
        background-color: var(--nav-hover);
        border-bottom-color: var(--accent);
    }

    .nav-link.audit-link {
        color: #ffb6c1 !important;
    }

    .nav-link.audit-link.active {
        border-bottom-color: var(--accent-audit);
    }

    .dropdown-menu {
        display: none;
        position: absolute;
        top: 60px;
        left: 0;
        background-color: #2c3b41;
        min-width: 210px;
        box-shadow: 0 8px 16px rgba(0,0,0,0.4);
        border-radius: 0 0 4px 4px;
        z-index: 1040;
        overflow: hidden;
        border: 1px solid rgba(255,255,255,0.05);
        border-top: none;
    }

    .nav-item:hover .dropdown-menu {
        display: block;
        animation: slideIn 0.2s ease-out;
    }

    @keyframes slideIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .dropdown-item {
        display: flex;
        align-items: center;
        padding: 12px 18px;
        color: var(--nav-text);
        text-decoration: none;
        border-bottom: 1px solid rgba(255,255,255,0.03);
        font-size: 13px;
        transition: 0.2s;
    }

    .dropdown-item:last-child { border-bottom: none; }

    .dropdown-item:hover {
        background-color: var(--nav-hover);
        color: #fff;
        padding-left: 22px;
    }

    .dropdown-item i { margin-right: 12px; width: 16px; text-align: center; opacity: 0.8; }

    .nav-right {
        display: flex;
        align-items: center;
        gap: 12px;
        padding-left: 20px;
    }

    .timer-badge {
        background: rgba(255,255,255,0.05);
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        color: var(--nav-text);
        display: inline-flex;
        align-items: center;
        gap: 6px;
        border: 1px solid rgba(255,255,255,0.1);
    }

    .logout-btn {
        height: 36px;
        width: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        color: var(--nav-text);
        transition: 0.3s;
        background: transparent;
    }

    .logout-btn:hover {
        background: rgba(216, 27, 96, 0.15);
        color: #ff4d4d;
        transform: scale(1.05);
    }

    .mobile-toggle {
        display: none;
        font-size: 20px;
        color: #fff;
        cursor: pointer;
        padding: 10px;
    }

    @media (max-width: 992px) {
        .mobile-toggle { display: block; }
        .nav-links {
            display: none;
            flex-direction: column;
            position: absolute;
            top: 60px;
            left: 0;
            right: 0;
            background-color: var(--nav-bg);
            height: auto;
            max-height: calc(100vh - 60px);
            overflow-y: auto;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        .nav-links.show { display: flex !important; }
        .nav-item { width: 100%; height: auto; }
        .nav-link {
            height: 50px;
            padding: 0 20px;
            border-bottom: none;
            border-left: 3px solid transparent;
        }
        .nav-link.active { border-left-color: var(--accent); background: #1e282c; }
        .dropdown-menu {
            display: none;
            position: static;
            background: #151a1d;
            box-shadow: none;
            width: 100%;
            border-radius: 0;
            border: none;
        }
        .nav-item.active-mobile .dropdown-menu { display: block; }
        .nav-item.active-mobile .fa-caret-down { transform: rotate(180deg); }
    }

    #main { margin-left: 0 !important; margin-top: 60px !important; padding: 20px; }
</style>
	</head>
	<body>
		<div class="wrapper">
            <span style="display:none;" id="idto">10</span>
            <span style="display:none;" id="timer"></span>

            <nav class="top-navbar">
                <div class="mobile-toggle" onclick="toggleMenu()"><i class="fa fa-bars"></i></div>
                
                <a class="wartelpas-brand" href="./?session=S3c7x9_LB">
                    <img src="img/logo.png" alt="MIKHMON" class="brand-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <span style="display:none; color:#fff; font-weight:bold; font-size:18px;">WARTELPAS</span>
                </a>

                <ul class="nav-links" id="mainNav">
                    <li class="nav-item">
                        <a class="nav-link active" href="./?session=S3c7x9_LB">
                            <i class="fa fa-dashboard"></i> Dashboard
                        </a>
                    </li>

                    <li class="nav-item" onclick="toggleMobileSub(this)">
                        <a class="nav-link" href="javascript:void(0)">
                            <i class="fa fa-users"></i> Pengguna <i class="fa fa-caret-down" style="margin-left:auto; font-size:10px;"></i>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="./?hotspot=users&profile=all&session=S3c7x9_LB"><i class="fa fa-list"></i> Daftar User</a>
                            <a class="dropdown-item" href="./?hotspot-user=generate&session=S3c7x9_LB"><i class="fa fa-user-plus"></i> Generate</a>
                        </div>
                    </li>

                    <li class="nav-item" onclick="toggleMobileSub(this)">
                        <a class="nav-link" href="javascript:void(0)">
                            <i class="fa fa-pie-chart"></i> Profil User <i class="fa fa-caret-down" style="margin-left:auto; font-size:10px;"></i>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="./?hotspot=user-profiles&session=S3c7x9_LB"><i class="fa fa-list"></i> Daftar Profil</a>
                            <a class="dropdown-item" href="./?user-profile=add&session=S3c7x9_LB"><i class="fa fa-plus-square"></i> Buat Profil Baru</a>
                        </div>
                    </li>

                    <li class="nav-item" onclick="toggleMobileSub(this)">
                        <a class="nav-link" href="javascript:void(0)">
                            <i class="fa fa-wifi"></i> Hotspot <i class="fa fa-caret-down" style="margin-left:auto; font-size:10px;"></i>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="./?hotspot=active&session=S3c7x9_LB"><i class="fa fa-wifi"></i> User Aktif</a>
                            <a class="dropdown-item" href="./?hotspot=hosts&session=S3c7x9_LB"><i class="fa fa-laptop"></i> Host Terhubung</a>
                            <a class="dropdown-item" href="./?hotspot=cookies&session=S3c7x9_LB"><i class="fa fa-hourglass"></i> Cookies</a>
                            <a class="dropdown-item" href="./?hotspot=dhcp-leases&session=S3c7x9_LB"><i class="fa fa-sitemap"></i> DHCP Leases</a>
                        </div>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="./?report=selling&idbl=jan2026&session=S3c7x9_LB">
                            <i class="fa fa-money"></i> Laporan
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link audit-link" href="./?report=audit_session&session=S3c7x9_LB">
                            <i class="fa fa-check-square-o"></i> Audit
                        </a>
                    </li>
                </ul>

                <div class="nav-right">
                    <span class="timer-badge" title="Idle Timeout">
                        <i class="fa fa-clock-o"></i> <span id="timer_val">--:--</span>
                    </span>
                    <a id="logout" class="logout-btn" href="./?hotspot=logout&session=S3c7x9_LB" title="Keluar">
                        <i class="fa fa-sign-out fa-lg"></i>
                    </a>
                </div>
            </nav>

            <div id="main">
                <div id="loading" class="lds-dual-ring"></div>
                <div class="main-container main-container-fluid" style="display:none">
                    <link rel="stylesheet" href="css/dashboard-clean-pro.css">
                    
                    <div id="reloadHome" class="main-content">
                        <div id="loading-halus"></div>
                        <div class="row-kpi">
                            <div class="kpi-box border-green">
                                <h1 id="kpi-active">0</h1>
                                <div class="label">User Active <span class="blink" style="color:var(--accent-green)">‚óè LIVE</span></div>
                            </div>
                            <div class="kpi-box border-blue">
                                <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                                    <h1 id="kpi-sold">0</h1>
                                    <span id="ghost-tag" style="display:none;" class="ghost-alert blink"><i class="fa fa-ghost"></i> GHOST</span>
                                </div>
                                <div class="label">Voucher Terjual (Hari Ini)</div>
                            </div>
                            <div class="kpi-box border-yellow">
                                <h1 id="kpi-income">Rp 0</h1>
                                <div class="label" id="kpi-est">Proyeksi: Rp 0</div>
                            </div>
                            <div class="kpi-box border-audit" id="audit-box">
                                <h1 id="audit-status">CLEAR</h1>
                                <div class="label" id="audit-val">Selisih: Rp 0</div>
                                <div class="audit-detail" id="audit-detail"></div>
                            </div>
                        </div>

                        <div class="dashboard-grid">
                            <div class="card card-chart">
                                <div class="card-header">
                                    <h3><i class="fa fa-line-chart"></i> PERFORMA BISNIS</h3>
                                    <div class="month-tabs">
                                        <span class="month-tab" data-month="12">Desember</span>
                                        <span class="month-tab active" data-month="1">Januari</span>
                                    </div>
                                </div>
                                <div class="card-body" id="r_2_content"></div>
                            </div>
                            <div class="card card-transaction">
                                <div class="card-header">
                                    <h3><i class="fa fa-history"></i> TRANSAKSI TERAKHIR</h3>
                                    <span class="blink" style="font-size:10px; font-weight:bold; color:var(--accent-green);">
                                        <i class="fa fa-circle"></i> LIVE
                                    </span>
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>JAM</th>
                                                    <th>USER</th>
                                                    <th style="text-align:center;">BLOK</th>
                                                    <th style="text-align:right;">IDR</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabel_riwayat">
                                                <tr><td colspan="4" class="text-center" style="padding:30px; color:#8898aa;">Memuat...</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <span id="row-count">Menampilkan 0 transaksi</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
		</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highcharts/11.4.1/highcharts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highcharts/11.4.1/themes/dark-unica.min.js"></script>
<script src="./js/mikhmon-ui.dark.min.js"></script>
<script src="./js/mikhmon.js"></script>

<script>
    function toggleMenu() {
        var x = document.getElementById("mainNav");
        x.classList.toggle("show");
    }

    function toggleMobileSub(el) {
        if (window.innerWidth <= 992) {
            el.classList.toggle("active-mobile");
        }
    }

    // Sinkronisasi timer dummy (sesuaikan dengan logika server Anda)
    function syncTimer() {
        var t = document.getElementById("timer").innerText;
        if(t) document.getElementById("timer_val").innerText = t;
    }
    setInterval(syncTimer, 1000);

    $(document).ready(function() {
        // Menampilkan main container selepas muatan selesai
        setTimeout(function(){
            $("#loading").hide();
            $(".main-container").fadeIn();
        }, 500);

        // Kemas kini KPI secara berkala
        function updateKPI() {
            // Simulasi kemas kini (Gantikan dengan AJAX sebenar anda)
            console.log("Mengemas kini KPI...");
        }
        setInterval(updateKPI, 10000);
    });
</script>
</body>
</html>