<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap 3 Modals - Dark Mode Professional</title>
    
    <!-- Bootstrap 3 CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    
    <!-- Font Awesome untuk Ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        /* --- CUSTOM DARK MODE THEME --- */
        body {
            background-color: #121212; /* Latar belakang sangat gelap */
            color: #e0e0e0; /* Teks abu-abu terang */
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            padding-top: 50px;
        }

        h2, h3, h4, h5 {
            color: #ffffff; /* Judul putih terang */
        }

        .text-muted {
            color: #a0a0a0 !important;
        }

        hr {
            border-top: 1px solid #333;
        }

        /* Tombol Utama */
        .btn-lg {
            border-radius: 4px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            border: none;
            margin: 5px; /* Tambahan margin agar tombol tidak dempet */
        }

        .btn-warning {
            background-color: #ff9800;
            color: #fff;
        }
        
        .btn-primary {
            background-color: #2196f3;
            color: #fff;
            transition: all 0.3s ease; /* Transisi halus saat berubah warna */
        }

        .btn-success {
            background-color: #4caf50;
            color: #fff;
        }

        .btn-info {
            background-color: #00bcd4;
            color: #fff;
        }

        /* Styling khusus tombol disabled di dark mode agar benar-benar gelap */
        .btn-disabled-dark {
            background-color: #2c2c2c !important; /* Warna gelap */
            color: #666 !important; /* Teks redup */
            border: 1px solid #444 !important;
            cursor: not-allowed !important;
            box-shadow: none !important;
            opacity: 0.7;
        }

        /* Styling Modal Dark Mode */
        .modal-content {
            background-color: #2c2c2c; /* Background modal gelap */
            color: #e0e0e0;
            border-radius: 8px;
            border: 1px solid #444;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .modal-header {
            background-color: #252525;
            border-bottom: 1px solid #3d3d3d;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            padding: 20px;
        }

        .modal-title {
            font-weight: 600;
            color: #fff;
            font-size: 18px;
        }

        /* Tombol close (x) di modal */
        .close {
            color: #fff;
            opacity: 0.7;
            text-shadow: none;
        }
        .close:hover {
            color: #fff;
            opacity: 1;
        }

        .modal-body {
            padding: 25px;
            color: #ccc;
        }

        .modal-footer {
            background-color: #252525;
            border-top: 1px solid #3d3d3d;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
            padding: 15px 25px;
        }

        /* Tombol Default di Footer (misal: Batal/Tutup) */
        .btn-default {
            background-color: #424242;
            color: #fff;
            border: 1px solid #555;
        }
        .btn-default:hover {
            background-color: #505050;
            color: #fff;
        }

        /* Form Styling Dark Mode */
        .form-group label {
            font-weight: 500;
            color: #b0b0b0;
            margin-bottom: 8px;
        }

        /* Tanda wajib isi */
        .required-mark {
            color: #ff5252;
            margin-left: 3px;
        }

        .form-control {
            background-color: #383838;
            border: 1px solid #555;
            color: #fff;
            border-radius: 4px;
            height: 40px; 
            box-shadow: none;
        }

        .form-control:focus {
            background-color: #404040;
            border-color: #2196f3;
            box-shadow: 0 0 5px rgba(33, 150, 243, 0.3);
            color: #fff;
        }

        /* Styling placeholder agar terbaca */
        .form-control::placeholder {
            color: #777;
        }

        /* Styling Select Option */
        select.form-control option {
            background-color: #383838;
            color: #fff;
        }

        /* Garis Pemisah Vertikal (Kanan) */
        .border-left-custom {
            border-left: 1px solid #3d3d3d;
        }
        @media (max-width: 991px) {
            .border-left-custom {
                border-left: none;
                border-top: 1px solid #3d3d3d;
                padding-top: 20px;
                margin-top: 20px;
            }
        }

        /* Styling area dinamis (checklist) Dark Mode */
        .dynamic-section {
            background-color: #1e2a36; /* Biru gelap sekali */
            border: 1px dashed #2196f3;
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
            display: none;
        }
        
        .section-divider {
            margin-top: 20px;
            margin-bottom: 20px;
            border-top: 1px solid #3d3d3d;
        }

        /* Radio & Checkbox text */
        .radio label, .checkbox label {
            color: #ccc;
        }

        .help-block {
            color: #888;
        }

        /* --- FULL SCREEN ALERT STYLES --- */
        #fullScreenAlert {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(18, 18, 18, 0.95); /* Hampir solid dark */
            z-index: 9999; /* Di atas segalanya */
            text-align: center;
        }

        .fs-alert-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 500px;
        }

        .fs-icon {
            font-size: 80px;
            color: #4caf50; /* Hijau Sukses */
            margin-bottom: 20px;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .fs-title {
            color: #fff;
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .fs-message {
            color: #bbb;
            font-size: 16px;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .fs-close-corner {
            position: absolute;
            top: 30px;
            right: 40px;
            font-size: 40px;
            color: #fff;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .fs-close-corner:hover {
            transform: scale(1.1) rotate(90deg);
            color: #ff5252;
        }

        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* --- LOG TERMINAL STYLE (MIKROTIK STYLE) --- */
        .terminal-window {
            background-color: #000;
            border: 1px solid #555;
            padding: 15px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 13px;
            height: 350px;
            overflow-y: auto;
            border-radius: 4px;
            color: #d0d0d0;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
        }

        /* Scrollbar kustom agar terlihat seperti terminal */
        .terminal-window::-webkit-scrollbar {
            width: 10px;
        }
        .terminal-window::-webkit-scrollbar-track {
            background: #111; 
        }
        .terminal-window::-webkit-scrollbar-thumb {
            background: #444; 
            border-radius: 2px;
        }
        .terminal-window::-webkit-scrollbar-thumb:hover {
            background: #666; 
        }

        .log-entry {
            margin-bottom: 4px;
            line-height: 1.4;
            display: block;
        }
        
        .log-time { color: #888; margin-right: 8px; }
        .log-topic { color: #aaa; margin-right: 8px; font-weight: bold; }
        
        .log-info { color: #d0d0d0; }      /* Default text */
        .log-success { color: #00ff00; }   /* Green */
        .log-warning { color: #ffeb3b; }   /* Yellow */
        .log-error { color: #ff5252; }     /* Red */
        .log-system { color: #00bcd4; }    /* Cyan */
        
        .cursor-blink {
            display: inline-block;
            width: 8px;
            height: 15px;
            background-color: #00ff00;
            animation: blink 1s infinite;
            vertical-align: middle;
            margin-left: 5px;
        }
        
        @keyframes blink {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2 text-center">
            <h2>Demo Popup Bootstrap 3</h2>
            <p class="lead text-muted">Contoh implementasi modal Dark Mode untuk Saudara Abdullah.</p>
            <hr>
            
            <button type="button" class="btn btn-warning btn-lg" data-toggle="modal" data-target="#modalKonfirmasi">
                <i class="fa fa-exclamation-triangle"></i> Tes Konfirmasi
            </button>
            
            <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#modalFormLengkap">
                <i class="fa fa-pencil-square-o"></i> Tes Form Kiri-Kanan
            </button>

            <button type="button" class="btn btn-success btn-lg" onclick="showFullScreenSuccess()">
                <i class="fa fa-check-circle"></i> Tes Alert Sukses
            </button>
            
            <hr>
            
            <!-- Tombol Trigger Log Simulasi -->
            <button type="button" class="btn btn-info btn-lg" onclick="startLogSimulation()">
                <i class="fa fa-terminal"></i> Tes Log Proses (Locked)
            </button>
        </div>
    </div>
</div>

<!-- 1. MODAL KONFIRMASI -->
<div class="modal fade" id="modalKonfirmasi" tabindex="-1" role="dialog" aria-labelledby="labelKonfirmasi">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="labelKonfirmasi">Konfirmasi Tindakan</h4>
            </div>
            <div class="modal-body text-center">
                <div style="font-size: 40px; color: #ff9800; margin-bottom: 15px;">
                    <i class="fa fa-question-circle"></i>
                </div>
                <p>Apakah Anda yakin ingin melanjutkan proses ini? Tindakan ini akan menyimpan data ke database.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Batal</button>
                <button type="button" class="btn btn-warning" onclick="simpanTindakan()">Ya, Lanjutkan</button>
            </div>
        </div>
    </div>
</div>

<!-- 2. MODAL FORM KIRI-KANAN -->
<div class="modal fade" id="modalFormLengkap" tabindex="-1" role="dialog" aria-labelledby="labelForm">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="labelForm"><i class="fa fa-user-plus"></i> Form Registrasi Data</h4>
            </div>
            <form id="mainForm">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5 style="border-bottom: 2px solid #2196f3; padding-bottom: 10px; margin-top: 0; color: #2196f3;">Data Utama</h5>
                            <div class="form-group">
                                <label for="namaLengkap">Nama Lengkap <span class="required-mark">*</span></label>
                                <input type="text" class="form-control" id="namaLengkap" placeholder="Contoh: Abdullah" required>
                            </div>
                            <div class="form-group">
                                <label for="emailUser">Alamat Email <span class="required-mark">*</span></label>
                                <input type="email" class="form-control" id="emailUser" placeholder="nama@email.com" required>
                            </div>
                            <div class="form-group">
                                <label for="divisi">Divisi / Bagian <span class="required-mark">*</span></label>
                                <select class="form-control" id="divisi" required>
                                    <option value="">-- Pilih Divisi --</option>
                                    <option value="IT">Teknologi Informasi</option>
                                    <option value="HR">Sumber Daya Manusia</option>
                                    <option value="FIN">Keuangan</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6 border-left-custom">
                            <h5 style="border-bottom: 2px solid #2196f3; padding-bottom: 10px; margin-top: 0; color: #2196f3;">Preferensi & Opsi</h5>
                            <div class="form-group">
                                <label>Jenis Layanan</label>
                                <div class="radio">
                                    <label><input type="radio" name="layanan" value="standard" checked> Layanan Standar</label>
                                </div>
                                <div class="radio">
                                    <label><input type="radio" name="layanan" value="premium"> Layanan Premium</label>
                                </div>
                            </div>
                            <div class="section-divider"></div>
                            <div class="form-group">
                                <label>Opsi Tambahan</label>
                                <div class="checkbox">
                                    <label style="font-weight: bold; color: #64b5f6;">
                                        <input type="checkbox" id="checkRequestKhusus"> Saya memiliki permintaan khusus (Custom Request)
                                    </label>
                                </div>
                                <div class="dynamic-section" id="areaRequestKhusus">
                                    <div class="form-group">
                                        <label for="detailRequest" style="color: #90caf9;">Detail Permintaan <span class="required-mark">*</span></label>
                                        <textarea class="form-control" id="detailRequest" rows="3" placeholder="Jelaskan kebutuhan khusus Anda di sini..."></textarea>
                                        <p class="help-block"><small><i class="fa fa-info-circle"></i> Wajib diisi jika opsi dicentang.</small></p>
                                    </div>
                                    <div class="form-group">
                                        <label for="kodeUnik" style="color: #90caf9;">Kode Referensi (Opsional)</label>
                                        <input type="text" class="form-control" id="kodeUnik" placeholder="Cth: REF-2024">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Tutup</button>
                    <button type="submit" class="btn btn-primary" id="btnSubmit">Simpan Data</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 4. MODAL LOG TERMINAL (LOCKED) -->
<!-- Perhatikan: data-backdrop="static" dan data-keyboard="false" membuat tidak bisa di-close sembarangan -->
<div class="modal fade" id="modalLogProcess" tabindex="-1" role="dialog" aria-labelledby="labelLog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <!-- Tombol Close (X) dihilangkan saat proses, nanti dimunculkan lewat JS bila perlu, atau dibiarkan hilang -->
                <button type="button" class="close" id="btnCloseHeader" data-dismiss="modal" aria-label="Close" style="display:none;"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="labelLog"><i class="fa fa-cog fa-spin"></i> System Processing...</h4>
            </div>
            <div class="modal-body" style="background-color: #222; padding: 10px;">
                <div id="terminalContainer" class="terminal-window">
                    <!-- Log lines akan muncul di sini secara dinamis -->
                    <span class="cursor-blink"></span>
                </div>
            </div>
            <div class="modal-footer">
                <!-- Status Text -->
                <span id="processStatus" style="float: left; margin-top: 5px; color: #ff9800;">
                    <i class="fa fa-refresh fa-spin"></i> Sedang memproses...
                </span>
                
                <!-- Tombol Close di Footer (Disabled saat mulai) -->
                <button type="button" class="btn btn-default btn-disabled-dark" id="btnCloseLog" data-dismiss="modal" disabled>Tutup</button>
            </div>
        </div>
    </div>
</div>

<!-- 3. FULL SCREEN SUCCESS ALERT -->
<div id="fullScreenAlert">
    <div class="fs-close-corner" onclick="closeFullScreenSuccess()">
        <i class="fa fa-times"></i>
    </div>
    <div class="fs-alert-content">
        <div class="fs-icon">
            <i class="fa fa-check-circle"></i>
        </div>
        <h2 class="fs-title">BERHASIL!</h2>
        <p class="fs-message">Data Anda telah berhasil disimpan ke dalam sistem.<br>Terima kasih atas konfirmasinya.</p>
        <button class="btn btn-default btn-lg" style="min-width: 150px;" onclick="closeFullScreenSuccess()">Tutup Notifikasi</button>
    </div>
</div>

<!-- Scripts (jQuery & Bootstrap JS) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<script>
    $(document).ready(function() {
        validateForm();

        $('#checkRequestKhusus').change(function() {
            if($(this).is(":checked")) {
                $('#areaRequestKhusus').slideDown(300);
                setTimeout(function(){ $('#detailRequest').focus(); }, 300);
            } else {
                $('#areaRequestKhusus').slideUp(300);
                $('#detailRequest').val('');
                $('#kodeUnik').val('');
            }
            validateForm();
        });

        $('#namaLengkap, #emailUser, #divisi, #detailRequest').on('input change keyup', function() {
            validateForm();
        });

        function validateForm() {
            var isValid = true;
            var nama = $('#namaLengkap').val().trim();
            var email = $('#emailUser').val().trim();
            var divisi = $('#divisi').val();

            if (nama === '' || email === '' || divisi === '') isValid = false;

            if ($('#checkRequestKhusus').is(':checked')) {
                var detail = $('#detailRequest').val().trim();
                if (detail === '') isValid = false;
            }

            var btn = $('#btnSubmit');
            if (isValid) {
                btn.prop('disabled', false).removeClass('btn-disabled-dark').addClass('btn-primary');
            } else {
                btn.prop('disabled', true).removeClass('btn-primary').addClass('btn-disabled-dark');
            }
        }

        $('#mainForm').on('submit', function(e) {
            e.preventDefault();
            if ($('#btnSubmit').prop('disabled')) return;
            $('#modalFormLengkap').modal('hide');
            showFullScreenSuccess();
            this.reset();
            $('#areaRequestKhusus').hide();
            validateForm();
        });
    });

    function simpanTindakan() {
        $('#modalKonfirmasi').modal('hide');
        showFullScreenSuccess();
    }

    function showFullScreenSuccess() {
        $('#fullScreenAlert').fadeIn(300);
    }

    function closeFullScreenSuccess() {
        $('#fullScreenAlert').fadeOut(300);
    }

    // --- LOGIC SIMULASI LOG (MIKROTIK STYLE) ---
    var logInterval;
    var logSteps = [
        { msg: "initializing system module...", type: "system", delay: 500 },
        { msg: "verifying user credentials...", type: "info", delay: 1200 },
        { msg: "loading configuration files...", type: "info", delay: 800 },
        { msg: "checking network interfaces...", type: "info", delay: 1000 },
        { msg: "interface eth0: link up (1000M/Full)", type: "system", delay: 1500 },
        { msg: "connecting to remote database...", type: "warning", delay: 2000 },
        { msg: "downloading update packages (20%)...", type: "info", delay: 1000 },
        { msg: "downloading update packages (45%)...", type: "info", delay: 800 },
        { msg: "downloading update packages (80%)...", type: "info", delay: 800 },
        { msg: "downloading update packages (100%)...", type: "info", delay: 500 },
        { msg: "validating package signatures...", type: "info", delay: 1200 },
        { msg: "connection established to 192.168.88.1", type: "success", delay: 1000 },
        { msg: "syncing data tables...", type: "info", delay: 1500 },
        { msg: "WARN: high latency detected on route 2", type: "error", delay: 800 },
        { msg: "retrying connection optimization...", type: "warning", delay: 1000 },
        { msg: "optimization complete.", type: "success", delay: 800 },
        { msg: "finalizing transaction...", type: "info", delay: 1000 },
        { msg: "PROCESS COMPLETED SUCCESSFULLY.", type: "success", delay: 500 }
    ];

    function startLogSimulation() {
        // 1. Tampilkan Modal
        $('#modalLogProcess').modal('show');
        
        // 2. Reset Tampilan (Kunci Tombol, Bersihkan Log)
        $('#btnCloseLog').prop('disabled', true).addClass('btn-disabled-dark');
        $('#btnCloseHeader').hide(); // Sembunyikan tombol X
        $('#processStatus').html('<i class="fa fa-refresh fa-spin"></i> Sedang memproses...').css('color', '#ff9800');
        $('#terminalContainer').html('<span class="cursor-blink"></span>'); // Reset isi terminal
        
        var currentIndex = 0;

        // 3. Fungsi Rekursif untuk menjalankan log dengan delay bervariasi
        function processNextLog() {
            if (currentIndex < logSteps.length) {
                var step = logSteps[currentIndex];
                
                // Hapus cursor lama
                $('.cursor-blink').remove();
                
                // Buat baris log baru
                var time = new Date().toLocaleTimeString('id-ID', { hour12: false });
                var colorClass = "log-" + step.type;
                var newLine = '<div class="log-entry">' +
                              '<span class="log-time">' + time + '</span>' +
                              '<span class="log-topic">system,' + step.type + '</span>' +
                              '<span class="' + colorClass + '">' + step.msg + '</span>' +
                              '</div>';
                
                // Append dan tambah cursor baru
                $('#terminalContainer').append(newLine);
                $('#terminalContainer').append('<span class="cursor-blink"></span>');
                
                // Auto Scroll ke bawah
                var terminal = document.getElementById('terminalContainer');
                terminal.scrollTop = terminal.scrollHeight;
                
                currentIndex++;
                
                // Jadwalkan langkah berikutnya
                setTimeout(processNextLog, step.delay);
            } else {
                // 4. Jika Selesai
                finishLogSimulation();
            }
        }

        // Mulai proses pertama dengan sedikit delay agar modal muncul dulu
        setTimeout(processNextLog, 1000);
    }

    function finishLogSimulation() {
        // Hapus animasi cursor
        $('.cursor-blink').remove();
        
        // Update Status
        $('#processStatus').html('<i class="fa fa-check"></i> Selesai').css('color', '#4caf50');
        
        // Aktifkan Tombol Tutup
        $('#btnCloseLog').prop('disabled', false).removeClass('btn-disabled-dark');
        $('#btnCloseHeader').show(); // Munculkan tombol X
        
        // Ganti judul modal
        $('#labelLog').html('<i class="fa fa-check-square-o"></i> Process Complete');
    }
</script>

</body>
</html>